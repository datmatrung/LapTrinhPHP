// Tạo bảng
CREATE DATABASE QL_SanPham CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE QL_SanPham;
CREATE TABLE LoaiSanPham(
	MaLoaiSanPham	INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	TenLoaiSanPham	VARCHAR(64) NOT NULL,
	BiXoa		BIT NOT NULL
);
CREATE TABLE HangSanXuat(
	MaHangSanXuat	INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	TenHangSanXuat	VARCHAR(64) NOT NULL,
	BiXoa		BIT NOT NULL
);
CREATE TABLE TinhTrang(
	MaTinhTrang	INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	TenTinhTrang	VARCHAR(45) NOT NULL
);
CREATE TABLE TaiKhoan(
	MaTaiKhoan	INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	TenDangNhap	VARCHAR(30) NOT NULL, 
	MatKhau		VARCHAR(30) NOT NULL, 
	TenHienThi	VARCHAR(64) NOT NULL, 
	DiaChi		VARCHAR(256),
	SoDienThoai	VARCHAR(11) NOT NULL,
	Email		VARCHAR(64) NOT NULL, 
	BiXoa		BIT NOT NULL, 
	MaLoaiTaiKhoan	INT NOT NULL
);
CREATE TABLE SanPham(
	MaSanPham	INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
	TenSanPham	VARCHAR(256) NOT NULL, 
	HinhURL		VARCHAR(256) NOT NULL, 
	GiaSanPham	BIGINT NOT NULL, 
	SoLuongTon	INT NOT NULL, 
	SoLuongBan	INT NOT NULL, 
	SoLuocXem	INT NOT NULL, 
	BiXoa		BIT NOT NULL, 
	MaLoaiSanPham	INT NOT NULL, 
	MaHangSanXuat	INT NOT NULL
);
CREATE TABLE DonDatHang(
	MaDonDatHang	VARCHAR(9) PRIMARY KEY NOT NULL, 
	NgayLapPhieu	DATETIME NOT NULL, 
	TongThanhTien	INT NOT NULL, 
	MaTaiKhoan	INT NOT NULL, 
	MaTinhTrang	INT NOT NULL
);
CREATE TABLE ChiTietDonDatHang(
	MaChiTietDonDatHang	VARCHAR(11) PRIMARY KEY NOT NULL, 
	SoLuong			INT NOT NULL, 
	GiaBan			INT NOT NULL, 
	MaDonDatHang		VARCHAR(9) NOT NULL, 
	MaSanPham		INT NOT NULL
);

// Liên kết bảng
ALTER TABLE TaiKhoan ADD CONSTRAINT fk_TaiKhoan_LoaiTaiKhoan 
	FOREIGN KEY (MaLoaiTaiKhoan) REFERENCES LoaiTaiKhoan (MaLoaiTaiKhoan);
ALTER TABLE SanPham ADD CONSTRAINT fk_SanPham_LoaiSanPham 
	FOREIGN KEY (MaLoaiSanPham) REFERENCES LoaiSanPham (MaLoaiSanPham);
ALTER TABLE SanPham ADD CONSTRAINT fk_SanPham_HangSanXuat 
	FOREIGN KEY (MaHangSanXuat) REFERENCES HangSanXuat (MaHangSanXuat);
ALTER TABLE DonDatHang ADD CONSTRAINT fk_DonDatHang_TinhTrang 
	FOREIGN KEY (MaTinhTrang) REFERENCES TinhTrang (MaTinhTrang);
ALTER TABLE DonDatHang ADD CONSTRAINT fk_DonDatHang_TaiKhoan 
	FOREIGN KEY (MaTaiKhoan) REFERENCES TaiKhoan (MaTaiKhoan);
ALTER TABLE ChiTietDonDatHang ADD CONSTRAINT fk_ChiTietDonDatHang_DonDatHang 
	FOREIGN KEY (MaDonDatHang) REFERENCES DonDatHang (MaDonDatHang);
ALTER TABLE ChiTietDonDatHang ADD CONSTRAINT fk_ChiTietDonDatHang_SanPham 
	FOREIGN KEY (MaSanPham) REFERENCES SanPham (MaSanPham);
