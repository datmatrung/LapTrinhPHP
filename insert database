CREATE DATABASE muaban CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

USE muaban;

CREATE TABLE khachhang
(
id int PRIMARY KEY AUTO_INCREMENT,
fullname varchar(50),
gender tinyint(1),
dob date
);

CREATE TABLE hoadon
(
id int PRIMARY KEY AUTO_INCREMENT,
totalmoney bigint,
idkhachhang int
);

ALTER TABLE hoadon
ADD CONSTRAINT fk_hoadon_khachhang
FOREIGN KEY (idkhachhang) REFERENCES khachhang(id);



<?php
    $conn = new mysqli("localhost", "datmatrung", "123456", "muaban");
    mysqli_set_charset($conn, "UTF8");

    // Object oriented style (OOP)
    if($conn->connect_errno):
        exit('error ' . $conn->connect_errno);
    endif;
    // Procedural style (su dung function)
//    if(!$conn):
//        exit('error ' . mysqli_connect_error());
//    endif;

//    echo 'connect success';

    $query = "insert into khachhang(fullname, gender, dob) values ('khắc nguyên', 1, convert ('1982-04-27', date))";
//    $query = "delete from khachhang where id=1";
//    $query = "delete from khachhang where fullname = 'khắc nguyên'";
    $conn->query($query);
//    echo 'delete success';
    echo "id vua moi insert vao = ". $conn->insert_id;
//    echo "id vua moi insert vao = ". mysqli_insert_id();
    $conn->close();
